<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Relativity Visualiser</title>

    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.js"></script>

    <script src="sketch.js"></script>
    <script src="index.js"></script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/latex.css@1.5.0/style.min.css"
    />

    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <main id="app">
      <h1>Relativity Visualiser</h1>

      <!-- Sketch-->
      <div class="popout">
        <div class="sketch-wrapper sketch-wrapper--responsive">
          <div id="sketch" class="sketch"></div>

          <!-- Observers Table -->
          <div>
            <observers-table inline-template>
              <div class="table-wrapper">
                <table class="observers-table">
                  <thead>
                    <th>Object</th>
                    <th>Relative<br/>Speed</th>
                    <th>Time<br/>Dilation</th>
                    <th>Length<br/></th>
                    <th>Gridlines</th>
                    <th>Travel<br/>With</th>
                    <th>Change<br/>Relative<br/>Speed</th>
                    <th>Delete</th>
                  </thead>

                  <tbody>
                    <template v-for="(observer, index) in observers">
                      <observers-table-row :observer="observer" :key="index" />
                    </template>
                  </tbody>
                </table>
              </div>
            </observers-table>

            <!-- Controls-->
            <sketch-controls inline-template>
              <div class="controls">

                <p class="buttons-container">
                  <button @click="addObserver">Add Object</button>
                </p>
              </div>
            </sketch-controls>
          </main>
          </div>
        </div>
      </div>

  </body>

  <script type="text/x-template" id="observers-table-row-template">
    <tr>
      <td>
        <img :src="observer.spriteUrl()" />
      </td>
      <td>{{ relativeSpeed }}</td>
      <td>{{ timeDilation }}</td>
      <td>{{ lengthContraction }}</td>
      <td>
        <button v-if="observer.showGrid" @click="observer.showGrid = false"> Hide </button>
        <button v-else @click="observer.showGrid = true"> Show </button>
      </td>
      <td>
        <button @click="matchSpeed" title="Match observer speed">Match</button>
      </td>
      <td>
        <button @click="changeSpeed" title="Change observer speed">Change</button>
      </td>
      <td>
        <button @click="deleteObserver" title="Destroy observer">ðŸ’¥</button>
      </td>
    </tr>
  </script>
</html>
